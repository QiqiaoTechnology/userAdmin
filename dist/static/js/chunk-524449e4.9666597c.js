(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-524449e4"],{"23e3":function(t,e,a){"use strict";a.d(e,"h",(function(){return n})),a.d(e,"j",(function(){return r})),a.d(e,"e",(function(){return l})),a.d(e,"f",(function(){return o})),a.d(e,"g",(function(){return s})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return u})),a.d(e,"n",(function(){return d})),a.d(e,"b",(function(){return m})),a.d(e,"m",(function(){return p})),a.d(e,"p",(function(){return f})),a.d(e,"q",(function(){return b})),a.d(e,"l",(function(){return h})),a.d(e,"o",(function(){return g})),a.d(e,"i",(function(){return v})),a.d(e,"k",(function(){return y})),a.d(e,"a",(function(){return _}));var i=a("b775");function n(t){return Object(i["b"])({url:"qiqiao/websiteElement/getMenuBarList/"+t,method:"get"})}function r(t){return Object(i["b"])({url:"qiqiao/websiteElement/getTree",method:"get",params:t})}function l(t){return Object(i["b"])({url:"qiqiao/websiteElement/bannerByModule/"+t,method:"get"})}function o(t){return Object(i["b"])({url:"qiqiao/banner/findByPage",method:"get",params:t})}function s(t){return Object(i["b"])({url:"qiqiao/websiteElement/attachmentMaterialByModule/"+t,method:"get"})}function c(t){return Object(i["b"])({url:"qiqiao/websiteElement/articleByModule/"+t,method:"get"})}function u(t){return Object(i["b"])({url:"qiqiao/article/findMyArticle",method:"get",params:t})}function d(t,e){return Object(i["b"])({url:"qiqiao/websiteElement/updateBannerModule/"+t+"/"+e,method:"put"})}function m(t){return Object(i["b"])({url:"qiqiao/attachmentMaterial/findByPage",method:"get",params:t})}function p(t,e,a){return Object(i["b"])({url:"qiqiao/websiteElement/updateArticleRegion/"+t+"/"+e,method:"put",articleId:a})}function f(t,e){return Object(i["b"])({url:"qiqiao/websiteElement/updateAttachmentMaterialRegion/"+t+"/"+e,method:"put"})}function b(t){return Object(i["b"])({url:"qiqiao/websiteElement/updateMetaDataOfElement/",method:"put",data:t})}function h(t){return Object(i["b"])({url:"qiqiao/websiteElement/saveRegion",method:"post",data:t})}function g(t){return Object(i["b"])({url:"qiqiao/websiteElement/updateIsDeleted/"+t,method:"put"})}function v(t){return Object(i["b"])({url:"qiqiao/websiteElement/getTreeForManagement/"+t,method:"get"})}function y(t){return Object(i["b"])({url:"qiqiao/websiteElement/saveModule",method:"post",data:t})}function _(t){return Object(i["b"])({url:"qiqiao/websiteElement/region/"+t,method:"delete"})}},"2be8":function(t,e,a){"use strict";var i=a("73e0"),n=a.n(i);n.a},"3b78":function(t,e,a){},7021:function(t,e,a){},"73e0":function(t,e,a){},"7ca6":function(t,e,a){},"801f":function(t,e,a){},9261:function(t,e,a){"use strict";var i=a("801f"),n=a.n(i);n.a},"9ab3":function(t,e,a){},b8a6:function(t,e,a){},bf96:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view",{ref:"childItem"}),t._v(" "),a("el-drawer",{attrs:{title:"当前使用的轮播图集合名称："+t.itemForm.bannerName,"before-close":t.cancelForm,visible:t.dialog,direction:"ltr",size:"770px"},on:{"update:visible":function(e){t.dialog=e}}},[t.bannerEdit?a("div",{staticClass:"demo-drawer__content"},[t._l(t.bannerList,(function(e,i){return a("el-card",{key:i,staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(e.bannerName))]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.subEditBanner(e)}}},[t._v("使用该轮播图集合")])],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-table",{attrs:{data:e.bannerDetailList}},[a("el-table-column",{attrs:{label:"图片",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"100px",height:"65px"},attrs:{src:e.row.attachmentUrl,fit:"contain","preview-src-list":t.srcList}})]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{property:"title",label:"轮播图标题",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"subtitle",label:"轮播图副标题"}}),t._v(" "),a("el-table-column",{attrs:{property:"redirectUrl",label:"轮播图跳转地址"}})],1)],1)])})),t._v(" "),a("div",{staticClass:"demo-drawer__footer"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.queryParam.page,limit:t.queryParam.size},on:{"update:page":function(e){return t.$set(t.queryParam,"page",e)},"update:limit":function(e){return t.$set(t.queryParam,"size",e)},pagination:t.getBannerList}})],1)],2):a("div",{staticClass:"demo-drawer__content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.itemForm.bannerDetailList,border:""}},[a("el-table-column",{attrs:{label:"轮播图片",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"center-image"},[a("el-image",{staticStyle:{width:"150px",height:"70px"},attrs:{src:e.row.attachmentUrl,fit:"contain","preview-src-list":t.srcList}})],1)]}}],null,!1,3224710516)}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"轮播图图片标题",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"subtitle",label:"轮播图图片副标题",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"redirectUrl",label:"轮播图图片点击跳转链接"}})],1),t._v(" "),a("div",{staticClass:"demo-drawer__footer"},[a("el-button",{on:{click:t.cancelForm}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.toEditView()}}},[t._v(t._s(t.loading?"载入素材库中...":"去素材库替换"))])],1)],1)]),t._v(" "),a("el-drawer",{attrs:{title:"模块详情","before-close":t.cancelForm,visible:t.dialogArticle,direction:"rtl",size:"770px"},on:{"update:visible":function(e){t.dialogArticle=e}}},[a("div",{staticClass:"demo-drawer__content"},[510!==t.articleForm.websiteElementId?a("el-button",{staticClass:"artBtn",on:{click:t.saveArticle}},[t._v("新增填充该模块下文章内容")]):t._e(),t._v(" "),a("el-form",{ref:"articleForm",attrs:{model:t.articleForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"模块标题"}},[a("el-input",{on:{blur:function(e){return e.preventDefault(),t.toEditName()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur(e)}},model:{value:t.articleForm.title,callback:function(e){t.$set(t.articleForm,"title",e)},expression:"articleForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模块副标题"}},[a("el-input",{on:{blur:function(e){return e.preventDefault(),t.toEditName()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur(e)}},model:{value:t.articleForm.subtitle,callback:function(e){t.$set(t.articleForm,"subtitle",e)},expression:"articleForm.subtitle"}})],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.articleForm.children,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"文章标题："}},[a("span",[t._v(t._s(e.row.articleTitle))])]),t._v(" "),a("el-form-item",{attrs:{label:"文章作者："}},[a("span",[t._v(t._s(e.row.articleAuthor))])]),t._v(" "),a("el-form-item",{attrs:{label:"文章描述："}},[a("span",[t._v(t._s(e.row.articleDescription))])]),t._v(" "),a("el-form-item",{attrs:{label:"文章内容："}},[a("span",[t._v(t._s(e.row.articleContent))])]),t._v(" "),a("el-form-item",{attrs:{label:"文章创建时间："}},[a("span",[t._v(t._s(e.row.createTime))])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"文章图片",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"center-image"},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.coverAttachmentUrl,fit:"contain","preview-src-list":t.srcList}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"articleTitle",label:"文章标题"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.articleEdit(e.row)}}},[t._v("更改填充")])]}}])})],1),t._v(" "),a("el-drawer",{attrs:{title:"图文素材","append-to-body":!0,visible:t.innerDrawer,size:"620px"},on:{"update:visible":function(e){t.innerDrawer=e}}},[a("el-input",{staticClass:"selectInput",attrs:{clearable:"",placeholder:"请输入文章标题"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getArticleList(e)}},model:{value:t.aQueryParam.articleTitle,callback:function(e){t.$set(t.aQueryParam,"articleTitle",e)},expression:"aQueryParam.articleTitle"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getArticleList},slot:"append"})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.articleList}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"文章标题"}},[a("p",[t._v(t._s(e.row.articleTitle))])]),t._v(" "),a("el-form-item",{attrs:{label:"文章作者"}},[a("p",[t._v(t._s(e.row.articleAuthor))])]),t._v(" "),a("el-form-item",{attrs:{label:"文章描述"}},[a("span",[t._v(t._s(e.row.articleDescription))])]),t._v(" "),a("el-form-item",{attrs:{label:"文章内容"}},[a("span",[t._v(t._s(e.row.articleContent))])]),t._v(" "),a("el-form-item",{attrs:{label:"文章创建时间"}},[a("span",[t._v(t._s(e.row.createTime))])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"文章图片",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"center-image"},[a("el-image",{staticStyle:{width:"150px",height:"70px"},attrs:{src:e.row.coverAttachmentUrl,fit:"contain","preview-src-list":t.initSrcList}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"articleTitle",label:"文章标题"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.subArticleEdit(e.row)}}},[t._v("确定")])]}}])})],1),t._v(" "),a("div",{staticClass:"demo-drawer__footer"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.atotal>0,expression:"atotal > 0"}],attrs:{total:t.atotal,page:t.aQueryParam.page,limit:t.aQueryParam.size},on:{"update:page":function(e){return t.$set(t.aQueryParam,"page",e)},"update:limit":function(e){return t.$set(t.aQueryParam,"size",e)},pagination:t.getArticleList}})],1)],1)],1)]),t._v(" "),a("el-drawer",{attrs:{title:"图片素材库",visible:t.dialogMaterial,direction:"ttb",size:"360px"},on:{"update:visible":function(e){t.dialogMaterial=e}}},[a("el-input",{staticClass:"selectInput",attrs:{clearable:"",placeholder:"请输入图片标题"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getMaterialList(e)}},model:{value:t.MqueryParam.title,callback:function(e){t.$set(t.MqueryParam,"title",e)},expression:"MqueryParam.title"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getMaterialList},slot:"append"})],1),t._v(" "),a("el-row",{staticClass:"imgForm",attrs:{gutter:15}},t._l(t.MaterialList,(function(e,i){return a("el-col",{key:i,staticStyle:{"margin-bottom":"10px"},attrs:{span:4}},[a("el-card",{attrs:{"body-style":{padding:"2px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"ov1",attrs:{title:e.title}},[t._v("图片标题:"+t._s(e.title))])]),t._v(" "),a("el-image",{staticStyle:{height:"150px"},attrs:{src:e.attachmentUrl,fit:"contain",title:e.title,"preview-src-list":t.srcList}}),t._v(" "),a("div",{staticClass:"bottom clearfix"},[a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.subMaterialEdit(e)}}},[t._v("使用")])],1)],1)],1)})),1),t._v(" "),a("div",{staticClass:"demo-drawer__footer"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.mtotal>0,expression:"mtotal > 0"}],attrs:{total:t.mtotal,page:t.MqueryParam.page,limit:t.MqueryParam.size},on:{"update:page":function(e){return t.$set(t.MqueryParam,"page",e)},"update:limit":function(e){return t.$set(t.MqueryParam,"size",e)},pagination:t.getMaterialList}})],1)],1)],1)},n=[],r=(a("7021"),a("7ca6"),a("3b78"),a("9ab3"),a("b8a6"),a("dea7"),a("23e3")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[a("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},o=[];a("c5f6");Math.easeInOutQuad=function(t,e,a,i){return t/=i/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function c(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function u(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function d(t,e,a){var i=u(),n=t-i,r=20,l=0;e="undefined"===typeof e?500:e;var o=function t(){l+=r;var o=Math.easeInOutQuad(l,i,n,e);c(o),l<e?s(t):a&&"function"===typeof a&&a()};o()}var m={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[1,5,8,10,20,30,50]}},layout:{type:String,default:"total, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&d(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&d(0,800)}}},p=m,f=(a("2be8"),a("2877")),b=Object(f["a"])(p,l,o,!1,null,"146f971e",null),h=b.exports,g={components:{Pagination:h},data:function(){return{total:0,atotal:0,mtotal:0,dialogMaterial:!1,editWebsiteElementId:"",editArticleId:"",oldMaterialId:"",titleList:[],srcList:[],initSrcList:[],innerDrawer:!1,bannerList:[],MaterialList:[],articleList:[],itemForm:{},articleForm:{},dialog:!1,dialogArticle:!1,loading:!1,queryParam:{page:1,size:1},MqueryParam:{page:1,size:6,title:null,attachmentType:2},aQueryParam:{page:1,size:5,articleTitle:null,articleType:2},bannerEdit:!1}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},methods:{saveArticle:function(){var t=this,e={parentElementId:this.editWebsiteElementId};Object(r["l"])(e).then((function(e){t.innerDrawer=!0,t.editArticleId=e.data.eventId,t.editWebsiteElementId=e.data.websiteElementId,t.getArticleList()}))},toEditName:function(){var t=this,e={websiteElementId:this.editWebsiteElementId,title:this.articleForm.title,subtitle:this.articleForm.subtitle};Object(r["q"])(e).then((function(e){200===e.code&&t.$message({message:"修改标题成功",type:"success"})}))},getMaterialList:function(){var t=this;Object(r["b"])(this.MqueryParam).then((function(e){t.MaterialList=e.data.content,t.srcList=e.data.content.map((function(t){return t.attachmentUrl})),t.mtotal=e.data.total}))},getArticleList:function(){var t=this;""===this.aQueryParam.articleTitle&&(this.aQueryParam.articleTitle=null),Object(r["c"])(this.aQueryParam).then((function(e){t.articleList=e.data.content,t.initSrcList=e.data.content.map((function(t){return t.coverAttachmentUrl})),t.atotal=e.data.total}))},articleEdit:function(t){this.innerDrawer=!0,this.editArticleId=t.articleId,this.editWebsiteElementId=t.websiteElementId,this.getArticleList()},toEditView:function(){var t=this;this.loading=!0,Object(r["f"])(this.queryParam).then((function(e){t.loading=!1,t.bannerEdit=!0,t.bannerList=e.data.content,t.srcList=e.data.content[0].bannerDetailList.map((function(t){return t.attachmentUrl})),t.total=e.data.total}))},getBannerList:function(){var t=this;Object(r["f"])(this.queryParam).then((function(e){t.bannerList=e.data.content,t.srcList=e.data.content[0].bannerDetailList.map((function(t){return t.attachmentUrl})),t.total=e.data.total}))},subEditBanner:function(t){var e=this;Object(r["n"])(e.editWebsiteElementId,t.bannerId).then((function(t){200===t.code&&(e.$message({message:"轮播图替换成功",type:"success"}),e.dialog=!1,e.$refs["childItem"].getTree())}))},subArticleEdit:function(t){var e=this;Object(r["m"])(e.editWebsiteElementId,t.articleId,e.editArticleId).then((function(t){200===t.code&&(e.$message({message:"内容替换成功",type:"success"}),e.dialogArticle=!1,e.innerDrawer=!1,e.$refs["childItem"].getTree())}))},subMaterialEdit:function(t){var e=this;Object(r["p"])(e.editWebsiteElementId,t.attachmentMaterialInfoId).then((function(t){200===t.code&&(e.$message({message:"图片替换成功",type:"success"}),e.dialogMaterial=!1,e.$refs["childItem"].getTree())}))},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;0===t&&(this.header_color="transparent"),t>100&&(this.header_color="rgba(3,3,3,.8)"),t>200&&(this.show_backtop=!0),t<200&&(this.show_backtop=!1)},backTop:function(){var t,e=setInterval((function(){t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,window.scroll(0,t-50),0===t&&clearInterval(e)}),50)},head_fix:function(t){this.header_position=t[0],this.header_hover=t[1]},cancelForm:function(){this.dialog=!1,this.dialogArticle=!1,this.innerDrawer=!1,this.$refs["childItem"].getTree()}}},v=g,y=(a("9261"),Object(f["a"])(v,i,n,!1,null,null,null));e["default"]=y.exports},dea7:function(t,e,a){}}]);