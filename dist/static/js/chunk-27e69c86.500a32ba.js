(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27e69c86"],{"333d":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[n("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},i=[];n("c5f6");Math.easeInOutQuad=function(t,e,n,a){return t/=a/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function o(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function u(t,e,n){var a=r(),i=t-a,u=20,c=0;e="undefined"===typeof e?500:e;var l=function t(){c+=u;var r=Math.easeInOutQuad(c,a,i,e);o(r),c<e?s(t):n&&"function"===typeof n&&n()};l()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[8,10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&u(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&u(0,800)}}},l=c,d=(n("3ad7"),n("2877")),m=Object(d["a"])(l,a,i,!1,null,"99833538",null);e["a"]=m.exports},"39a6":function(t,e,n){},"3ad7":function(t,e,n){"use strict";var a=n("39a6"),i=n.n(a);i.a},"4cfb":function(t,e,n){"use strict";var a=n("bc3a"),i=n.n(a),s=n("5c96"),o=n("4360"),r="http://81.69.18.147/wisdom/",u=i.a.create({baseURL:r,timeout:5e4});u.interceptors.request.use((function(t){return console.log(t),t}),(function(t){return Object(s["Message"])({message:"网络请求失败，请稍后再试",type:"error",duration:5e3}),console.log(t),Promise.reject(t)})),u.interceptors.response.use((function(t){var e=t.data,n=t.headers["authorization"];return n&&(e.token=n),200!==e.code&&"200"!==e.code?(Object(s["Message"])({message:e.msg||"Error",type:"error",duration:5e3}),401===e.code&&s["MessageBox"].confirm("您已经登出，您可以取消以停留在此页面，或再次登录","确认注销",{confirmButtonText:"重新登入",cancelButtonText:"取消",type:"warning"}).then((function(){o["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(e.msg||"Error"))):e}),(function(t){var e=t.response.data.msg;return console.log("err"+e),Object(s["Message"])({message:e,type:"error",duration:5e3}),Promise.reject(t)}));var c=u;function l(t){return c({url:"/wx/manage/wxAccount/list",method:"get",params:t})}function d(t){return c({url:"/wx/manage/wxAccount/save",method:"post",data:t})}function m(t){return c({url:"/wx/manage/msgReplyRule/list",method:"get",params:t})}function g(t){return c({url:"/wx/manage/msgReplyRule/save",method:"post",data:t})}function f(t){return c({url:"/wx/manage/msgReplyRule/update",method:"post",data:t})}function p(t){return c({url:"/wx/manage/msgReplyRule/delete",method:"post",data:t})}function h(t){return c({url:"/wx/manage/wxUser/list",method:"get",params:t})}function w(t){return c({url:"/wx/manage/wxUserTags/list",method:"get",params:t})}function b(t){return c({url:"/wx/manage/wxUserTags/save",method:"post",data:t})}function v(t){return c({url:"/wx/manage/wxUserTags/batchTagging",method:"post",data:t})}function y(t){return c({url:"/wx/manage/wxUserTags/delete/"+t,method:"post"})}function x(t){return c({url:"/wx/manage/wxUserTags/batchUnTagging",method:"post",data:t})}function _(t){return c({url:"/wx/manage/wxUser/syncWxUsers",method:"post",data:t})}function L(t){return c({url:"/wx/manage/wxMsg/list",method:"get",params:t})}function k(t){return c({url:"/wx/manage/wxMsg/reply",method:"post",data:t})}function z(t){return c({url:"/wx/manage/wxMsg/delete",method:"post",data:t})}function S(t){return c({url:"/wx/manage/wxUser/info/"+t,method:"get"})}function T(t){return c({url:"/wx/manage/wxUser/delete",method:"post",data:t})}function $(t){return c({url:"/wx/manage/wxBlacklist/pushToBlacklist",method:"post",data:t})}function j(){return c({url:"/wx/manage/wxBlacklist/syncBlacklist",method:"get"})}function B(t){return c({url:"/wx/manage/wxBlacklist/pullFromBlacklist",method:"post",data:t})}function P(t){return c({url:"/wx/manage/wxBlacklist/list",method:"get",params:t})}n.d(e,"m",(function(){return l})),n.d(e,"s",(function(){return d})),n.d(e,"l",(function(){return m})),n.d(e,"r",(function(){return g})),n.d(e,"v",(function(){return f})),n.d(e,"f",(function(){return p})),n.d(e,"j",(function(){return h})),n.d(e,"i",(function(){return w})),n.d(e,"q",(function(){return b})),n.d(e,"a",(function(){return v})),n.d(e,"d",(function(){return y})),n.d(e,"c",(function(){return x})),n.d(e,"u",(function(){return _})),n.d(e,"k",(function(){return L})),n.d(e,"p",(function(){return k})),n.d(e,"e",(function(){return z})),n.d(e,"h",(function(){return S})),n.d(e,"b",(function(){return T})),n.d(e,"o",(function(){return $})),n.d(e,"t",(function(){return j})),n.d(e,"n",(function(){return B})),n.d(e,"g",(function(){return P}))},"5a7a":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"btnlist"},[n("el-dropdown",{attrs:{"split-button":"",size:"mini"},on:{command:t.handleCommand}},[t._v("\n      设为标签用户\n      "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.labList,(function(e,a){return n("el-dropdown-item",{key:a,attrs:{command:e.id}},[t._v(t._s(e.name))])})),1)],1),t._v(" "),n("el-dropdown",{attrs:{"split-button":"",size:"mini"},on:{command:t.deleteFansInfoLable}},[t._v("\n      批量取消粉丝标签\n      "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.labList,(function(e,a){return n("el-dropdown-item",{key:a,attrs:{command:e.id}},[t._v(t._s(e.name))])})),1)],1),t._v(" "),t.selectList.length>0?n("el-button",{attrs:{type:"danger",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.blackFans("all")}}},[t._v("批量拉黑粉丝")]):t._e(),t._v(" "),t.selectList.length>0?n("el-button",{attrs:{type:"success",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.DeblackFans("all")}}},[t._v("批量解除拉黑粉丝")]):t._e(),t._v(" "),n("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(e){return t.upList()}}},[t._v("同步粉丝到数据库")]),t._v(" "),n("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(e){return t.upblackList()}}},[t._v("同步黑名单到数据库")])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.fansList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{label:"粉丝头像",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.headimgurl,"preview-src-list":t.srcList}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"粉丝昵称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.nickname))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"粉丝所在地"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.province)+"  "+t._s(e.row.city))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"粉丝性别"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(2===e.row.sex?"女生":1===e.row.sex?"男生":"未知"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"粉丝状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.isBlacklist?n("el-tag",{attrs:{type:"success"}},[t._v("正常")]):n("el-tag",{attrs:{type:"danger"}},[t._v("已拉黑")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"粉丝标签"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.tagidList.length>0?n("div",t._l(e.row.tagidList,(function(e,a){return n("el-tag",{key:a,staticClass:"labelItem",staticStyle:{"margin-right":"10px"},attrs:{size:"mini",type:"success"}},[t._v(t._s(t.format(e)))])})),1):n("div",[t._v("空")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"关注时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.subscribeTime))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"200","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){return t.getMsgHistory(e.row)}}},[t._v("\n          消息记录\n        ")]),t._v(" "),0===e.row.isBlacklist?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.blackFans(e.row)}}},[t._v("\n          加入黑名单\n        ")]):n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(n){return t.DeblackFans(e.row)}}},[t._v("\n          放出黑名单\n        ")])]}}])})],1),t._v(" "),n("el-footer",[n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryParam.currPage,limit:t.queryParam.pageSize},on:{"update:page":function(e){return t.$set(t.queryParam,"currPage",e)},"update:limit":function(e){return t.$set(t.queryParam,"pageSize",e)},pagination:t.getList}})],1)],1)},i=[],s=(n("7f7f"),n("ac6a"),n("4cfb")),o=n("333d"),r=n("5f87"),u={components:{Pagination:o["a"]},data:function(){return{total:0,replyContent:"",labList:[],selectList:[],zhLabList:[],fansList:[],srcList:[],listLoading:!0,replyForm:{openid:"",replyContent:"",replyType:"text"},queryParam:{appid:"",pageSize:10,currPage:1}}},created:function(){this.getFansLableList(),this.getList()},methods:{upList:function(){var t=this;Object(s["u"])().then((function(e){200===e.code&&t.$message({type:"success",message:"同步成功"})}))},upblackList:function(){var t=this;Object(s["t"])().then((function(e){200===e.code&&t.$message({type:"success",message:"同步成功"})}))},handleDelete:function(t){var e=this,n=this;n.$confirm("此操作将永久删除选中粉丝用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=[];if("all"===t)a=e.selectList;else{var i=[];i.push(t.openid),a=i}Object(s["b"])(a).then((function(t){n.$message({type:"success",message:"成功删除该粉丝用户"}),n.getList()}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},blackFans:function(t){var e=this,n=this;n.$confirm("此操作将拉黑选中粉丝用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=[];if("all"===t)a=e.selectList;else{var i=[];i.push(t.openid),a=i}Object(s["o"])(a).then((function(t){n.$message({type:"success",message:"成功拉黑该粉丝用户"}),n.getList()}))})).catch((function(){n.$message({type:"info",message:"已取消操作"})}))},DeblackFans:function(t){var e=this,n=this;n.$confirm("此操作将解除选中黑名单粉丝用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=[];if("all"===t)a=e.selectList;else{var i=[];i.push(t.openid),a=i}Object(s["n"])(a).then((function(t){n.$message({type:"success",message:"成功解除拉黑该粉丝用户"}),n.getList()}))})).catch((function(){n.$message({type:"info",message:"已取消操作"})}))},getMsgHistory:function(t){this.$router.push({path:"/weChatService/msghistory",query:t})},format:function(t){var e="";return this.labList.forEach((function(n){n.id===t&&(e=n.name)})),e},deleteFansInfoLable:function(t){var e=this,n={openidList:this.selectList,tagid:t};this.selectList.length>0?Object(s["c"])(n).then((function(t){e.listLoading=!0,e.$message.success("取消标签成功"),setTimeout((function(){e.getList(),e.listLoading=!1}),800)})):this.$message.info("请选中一位粉丝用户")},handleSelectionChange:function(t){var e=this;this.selectList=[],t.forEach((function(t){e.selectList.push(t.openid)}))},handleCommand:function(t){var e=this,n={openidList:this.selectList,tagid:t};this.selectList.length>0?Object(s["a"])(n).then((function(t){e.listLoading=!0,e.$message.success("标签设置成功"),setTimeout((function(){e.getList(),e.listLoading=!1}),800)})):this.$message.info("请选中一位粉丝用户")},getFansLableList:function(){var t=this;Object(s["i"])().then((function(e){t.labList=e.list}))},getList:function(){var t=this;this.listLoading=!0,this.queryParam.appid=Object(r["a"])(),Object(s["j"])(this.queryParam).then((function(e){t.fansList=e.page.list,t.total=e.page.totalCount,t.fansList.length>0&&(t.srcList=t.fansList.map((function(t){return t.headimgurl}))),setTimeout((function(){t.listLoading=!1}),500)}))}}},c=u,l=n("2877"),d=Object(l["a"])(c,a,i,!1,null,null,null);e["default"]=d.exports}}]);