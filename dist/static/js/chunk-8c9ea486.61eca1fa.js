(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c9ea486"],{"358e":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"btnlist"},[s("el-input",{staticClass:"mini-input",attrs:{placeholder:"请输入搜索关键字（如用户账号，邮箱等）",clearable:""},model:{value:e.listQuery.query,callback:function(t){e.$set(e.listQuery,"query",t)},expression:"listQuery.query"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.getListByPage()}},slot:"append"})],1),e._v(" "),s("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.getList(e.listQuery.query="")}}},[s("span",{staticClass:"el-icon-search"}),e._v("查询全部")]),e._v(" "),s("el-button",{attrs:{size:"mini"},on:{click:e.editUser}},[s("span",{staticClass:"el-icon-plus"}),e._v("添加用户")])],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"roundTable",attrs:{data:e.userList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{label:"用户账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.username))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"用户姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"邮箱地址",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.address))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"激活状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0===t.row.activated?s("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("已激活")]):s("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("未激活")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"禁用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0!==t.row.disabled?s("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("未禁用")]):s("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("已禁用")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",align:"center",width:"250","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{attrs:{content:"重置配额",placement:"top"}},[s("el-button",{attrs:{size:"mini",round:"",type:"primary"},on:{click:function(s){return e.updateStorageUsed(t.row)}}},[s("i",{staticClass:"el-icon-refresh-right"})])],1),e._v(" "),s("el-tooltip",{attrs:{content:"重置密码",placement:"top"}},[s("el-button",{attrs:{size:"mini",round:"",type:"info"},on:{click:function(s){return e.resetPwd(t.row)}}},[s("i",{staticClass:"qiiconfont qiconzhongzhimima"})])],1),e._v(" "),s("el-tooltip",{attrs:{content:"修改密码",placement:"top"}},[s("el-button",{attrs:{size:"mini",round:"",type:"success"},on:{click:function(s){return e.updatePwd(t.row)}}},[s("i",{staticClass:"qiiconfont qiconxiugaimima"})])],1),e._v(" "),s("el-tooltip",{attrs:{content:"编辑",placement:"top"}},[s("el-button",{attrs:{size:"mini",round:"",type:"warning"},on:{click:function(s){return e.editUser(t.row)}}},[s("i",{staticClass:"qiiconfont qiconbianji"})])],1),e._v(" "),s("el-tooltip",{attrs:{content:"删除",placement:"top"}},[s("el-button",{attrs:{size:"mini",round:"",type:"danger"},on:{click:function(s){return e.delUser(t.row)}}},[s("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1),e._v(" "),s("el-footer",[s("paging",{staticClass:"page",attrs:{"total-count":e.total,"query-val":e.listQuery.query,"page-size":e.pageSize,"table-data":e.tableData},on:{tables:e.getView,getList:e.getList,getListByPage:e.getListByPage}})],1),e._v(" "),s("el-dialog",{attrs:{title:!0===e.editFlag?"编辑用户":"添加用户",width:"500px",visible:e.dialogAddFormVisible},on:{"update:visible":function(t){e.dialogAddFormVisible=t}}},[s("el-form",{ref:"addForm",staticClass:"addForm",attrs:{"show-close":!1,model:e.addForm,rules:e.rules,"label-width":"90px"}},[e.editFlag?e._e():s("el-form-item",{attrs:{label:"账户名称",prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入账户名称",autocomplete:"off"},model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username","string"===typeof t?t.trim():t)},expression:"addForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户姓名",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入用户姓名",autocomplete:"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name","string"===typeof t?t.trim():t)},expression:"addForm.name"}})],1),e._v(" "),e.editFlag?s("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"是否禁用",prop:"disabled"}},[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.addForm.disabled,callback:function(t){e.$set(e.addForm,"disabled",t)},expression:"addForm.disabled"}})],1):e._e(),e._v(" "),e.editFlag?e._e():s("el-form-item",{attrs:{label:"账户密码",prop:"password"}},[s("el-input",{attrs:{placeholder:"请输入账户密码",autocomplete:"off"},model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password","string"===typeof t?t.trim():t)},expression:"addForm.password"}})],1),e._v(" "),e.editFlag?e._e():s("el-form-item",{attrs:{label:"邮箱地址",prop:"address"}},[s("el-input",{attrs:{placeholder:"请输入邮箱地址",autocomplete:"off"},model:{value:e.addForm.address,callback:function(t){e.$set(e.addForm,"address","string"===typeof t?t.trim():t)},expression:"addForm.address"}},[s("i",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("@7qiao.club")])])],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.cancelForm("addForm")}}},[e._v("取 消")]),e._v(" "),s("el-button",{on:{click:function(t){return e.submitForm("addForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{"show-close":!1,"close-on-click-modal":!1,title:"修改密码",visible:e.pwdDialogVisible,width:"360px",center:""},on:{"update:visible":function(t){e.pwdDialogVisible=t}}},[s("el-form",{ref:"pwdForm",attrs:{"label-width":"108px",model:e.pwdForm,rules:e.pwdRules}},[s("el-form-item",{attrs:{label:"旧密码",prop:"existingPassword"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入",autocomplete:"off"},model:{value:e.pwdForm.existingPassword,callback:function(t){e.$set(e.pwdForm,"existingPassword","string"===typeof t?t.trim():t)},expression:"pwdForm.existingPassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"新密码",prop:"newpwd"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入",autocomplete:"off"},model:{value:e.pwdForm.newpwd,callback:function(t){e.$set(e.pwdForm,"newpwd","string"===typeof t?t.trim():t)},expression:"pwdForm.newpwd"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认新密码",prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入",autocomplete:"off"},model:{value:e.pwdForm.password,callback:function(t){e.$set(e.pwdForm,"password","string"===typeof t?t.trim():t)},expression:"pwdForm.password"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.cancelPwdForm("pwdForm")}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.toEditPwd("pwdForm")}}},[e._v("确认修改")])],1)],1),e._v(" "),s("el-dialog",{attrs:{"show-close":!1,title:"提示",visible:e.resetDialogVisible,width:"30%"},on:{"update:visible":function(t){e.resetDialogVisible=t}}},[s("p",[e._v("\n      用户密码重置成功；初始密码为："),s("span",{staticStyle:{color:"red"}},[e._v(e._s(e.copyForm.resetPwdVal))])]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.resetDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary",title:e.copyForm.resetPwdVal},on:{click:function(t){return e.handleCopy(e.copyForm,t)}}},[e._v("复制到粘贴板")])],1)])],1)},r=[],i=(s("7f7f"),s("6762"),s("2fdb"),s("dbc4"),s("7e82")),n=s("f71e"),o=s("d6d9"),l={components:{paging:o["a"]},data:function(){var e=this,t=function(e,t,s){t.length<6||t.length>16?s(new Error("密码长度长度在6到16个字符")):s()},s=function(t,s,a){""===s?a(new Error("请输入新密码")):(""!==e.pwdForm.password&&e.$refs.pwdForm.validateField("password"),a())},a=function(t,s,a){""===s?a(new Error("请再次输入新密码")):s!==e.pwdForm.newpwd?a(new Error("两次输入新密码不一致!")):a()},r=function(t,s,a){var r=e,i=/^[\\u4e00-\\u9fa5_a-zA-Z0-9-]{1,16}$/;return i.test(s)?r.userNameList.includes(s)?a(new Error("账号已存在，请重新输入")):void a():a(new Error("昵称格式：限16个字符，支持中英文、数字、减号或下划线"))},i=function(t,s,a){var r=e,i=/^\w+@[a-z0-9]+\.[a-z]{2,4}$/;return i.test(s)?r.addressesList.includes(s)?a(new Error("邮箱已存在，请重新输入")):void a():a(new Error("请输入正确的邮箱格式"))},n=function(t,s,a){var r=e;if(s.length>0&&s.length<16){if(r.nameList.includes(s)&&r.nameVal!==s)return a(new Error("用户姓名已存在；请重新输入"));a()}else a(new Error("请输入用户姓名，长度不能超过16个字符"))};return{copyForm:{userName:"",resetPwdVal:""},nameVal:"",resetDialogVisible:!1,pwdDialogVisible:!1,vid:"",total:0,pageSize:10,editFlag:"false",tableData:[],userList:[],userNameList:[],addressesList:[],nameList:[],dialogAddFormVisible:!1,addForm:{username:"",password:"",disabled:!1,name:"",address:"",tags:["status:regular_user","subscription:business_big"]},listLoading:!0,rules:{username:[{required:!0,trigger:"blur",validator:r}],name:[{required:!0,trigger:"blur",validator:n}],password:[{required:!0,trigger:"blur",validator:t}],address:[{required:!0,trigger:"blur",validator:i}]},pwdForm:{existingPassword:"",newpwd:"",password:""},pwdRules:{existingPassword:[{required:!0,message:"请输入旧密码!",trigger:"blur"},{max:16,message:"密码不能大于16位",trigger:"blur"}],newpwd:[{required:!0,validator:s,trigger:"blur"},{min:6,max:16,message:"密码长度长度在6到16个字符哦!",trigger:"blur"}],password:[{required:!0,validator:a,trigger:"blur"},{min:6,max:16,message:"密码长度长度在6到16个字符哦!",trigger:"blur"}]},listQuery:{query:""}}},created:function(){this.getList()},methods:{updateStorageUsed:function(e){var t=this;Object(i["k"])(e.id).then((function(e){t.$message.success("用户配额更新成功")}))},getView:function(e){this.userList=e},getList:function(e){var t=this;this.listLoading=!0;var s=this;e&&(s.pageSize=e),s.userList=[],Object(i["h"])().then((function(e){if(t.tableData=e.data.results,e.data.results.length>=s.pageSize)for(var a=0;a<s.pageSize;a++)s.userList.push(e.data.results[a]);else s.userList=e.data.results;t.userNameList=t.tableData.map((function(e){return e.username})),t.nameList=t.tableData.map((function(e){return e.name})),t.addressesList=t.tableData.map((function(e){return e.address})),t.total=e.data.total,setTimeout((function(){t.listLoading=!1}),500)}))},getListByPage:function(e){var t=this;this.listLoading=!0;var s=this;e&&(s.pageSize=e),s.userList=[],Object(i["h"])(this.listQuery).then((function(e){if(t.tableData=e.data.results,e.data.results.length>=s.pageSize)for(var a=0;a<s.pageSize;a++)s.userList.push(e.data.results[a]);else s.userList=e.data.results;t.total=e.data.total,setTimeout((function(){t.listLoading=!1}),500)}))},resetPwd:function(e){var t=this;t.$confirm("此操作将重置该用户的密码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["i"])(e.id).then((function(s){t.copyForm={resetPwdVal:s.data.password,userName:e.name},t.resetDialogVisible=!0}))})).catch((function(){t.$message({type:"info",message:"已取消重置"})}))},handleCopy:function(e,t){var s=e.resetPwdVal,a=e.userName+"的初始密码";Object(n["a"])(s,a,t),this.resetDialogVisible=!1},updatePwd:function(e){this.pwdid=e.id,this.pwdDialogVisible=!0},toEditPwd:function(e){var t=this;t.$refs[e].validate((function(s){if(!s)return!1;var a={existingPassword:t.pwdForm.existingPassword,password:t.pwdForm.password};Object(i["d"])(t.pwdid,a).then((function(s){t.$message.success("密码修改成功"),t.getList(),t.$refs[e].resetFields(),t.pwdDialogVisible=!1})).catch((function(e){t.$message.error("操作失败，请检查网络或重新输入正确密码"+e)}))}))},editUser:function(e){var t=this;e.id?(t.editFlag=!0,Object(i["g"])(e.id).then((function(e){t.addForm={name:e.data.name,disabled:e.data.disabled},t.nameVal=e.data.name,t.vid=e.data.id}))):(t.addForm={username:"",password:"",name:"",address:"",tags:["status:regular_user","subscription:business_big"]},t.editFlag=!1),this.dialogAddFormVisible=!0},submitForm:function(e){var t=this,s=this;this.$refs[e].validate((function(a){if(!a)return!1;!0===t.editFlag?Object(i["d"])(s.vid,s.addForm).then((function(t){s.$message.success("用户修改成功"),s.getList(),s.$refs[e].resetFields(),s.nameVal="",s.dialogAddFormVisible=!1})):Object(i["l"])(s.addForm).then((function(t){s.$message.success("用户添加成功"),s.getList(),s.$refs[e].resetFields(),s.nameVal="",s.dialogAddFormVisible=!1}))}))},cancelForm:function(e){this.dialogAddFormVisible=!1,this.$refs[e].resetFields(),this.nameVal=""},cancelPwdForm:function(e){this.pwdDialogVisible=!1,this.$refs[e].resetFields(),this.nameVal=""},delUser:function(e){var t=this;t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["b"])(e.id).then((function(e){t.$message({type:"success",message:"已删除"}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},d=l,u=(s("ae92"),s("2877")),c=Object(u["a"])(d,a,r,!1,null,"75476927",null);t["default"]=c.exports},7368:function(e,t,s){},"7e82":function(e,t,s){"use strict";var a=s("bc3a"),r=s.n(a),i=s("5c96"),n=s("4328"),o=s.n(n),l=r.a.create({baseURL:"http://202.104.182.70:5439/",timeout:5e5});l.interceptors.request.use((function(e){return e.data=o.a.stringify(e.data),"post"!==e.method.toLowerCase()&&"PUT"!==e.method.toLowerCase()||(e.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),e}),(function(e){return console.log(e),Promise.reject(e)})),l.interceptors.response.use((function(e){return e}),(function(e){return console.log("err"+e),Object(i["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)}));var d=l;function u(e){return d({url:"/users?accessToken=zhggp",method:"get",params:e})}function c(e){return d({url:"/users/"+e+"?accessToken=zhggp",method:"get"})}function p(e){return d({url:"/users/"+e+"?accessToken=zhggp",method:"delete"})}function m(e){return d({url:"/users?accessToken=zhggp",method:"post",data:e})}function f(e,t){return d({url:"/users/"+e+"/password/reset?accessToken=zhggp",method:"post",data:t})}function g(e,t){return d({url:"/users/"+e+"?accessToken=zhggp",method:"PUT",data:t})}function h(e){return d({url:"/addresses?accessToken=zhggp",method:"get",params:e})}function b(e){return d({url:"/addresses/resolve/"+e+"?accessToken=zhggp",method:"get"})}function w(e,t){return d({url:"/users/"+e+"/addresses?accessToken=zhggp",method:"post",data:t})}function v(e,t,s){return d({url:"/users/"+e+"/addresses/"+t+"?accessToken=zhggp",method:"PUT",data:s})}function y(e,t){return d({url:"/users/"+e+"/addresses/"+t+"?accessToken=zhggp",method:"delete"})}function F(e){return d({url:"/users/"+e+"/quota/reset?accessToken=zhggp",method:"post"})}s.d(t,"h",(function(){return u})),s.d(t,"g",(function(){return c})),s.d(t,"b",(function(){return p})),s.d(t,"l",(function(){return m})),s.d(t,"i",(function(){return f})),s.d(t,"d",(function(){return g})),s.d(t,"f",(function(){return h})),s.d(t,"e",(function(){return b})),s.d(t,"j",(function(){return w})),s.d(t,"c",(function(){return v})),s.d(t,"a",(function(){return y})),s.d(t,"k",(function(){return F}))},ae92:function(e,t,s){"use strict";var a=s("7368"),r=s.n(a);r.a},d6d9:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-pagination",{attrs:{background:"",layout:"total,sizes,prev, pager, next,jumper",query:e.queryVal,total:e.totalCount,"page-size":e.pageSize,"page-sizes":e.pageSizes,"current-page":e.currentPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})},r=[],i=(s("c5f6"),{props:{totalCount:{type:Number,default:10},pageSize:{type:Number,default:10},queryVal:{type:String,default:""},pageSizes:{type:Array,default:function(){return[1,5,6,8,10,15,20,30,50]}},tableData:{type:Array,default:function(){return[]}},defaultData:{type:Boolean,default:!1}},data:function(){return{tableView:[],currentPage:1}},watch:{defaultData:function(e){this.handleCurrentChange(0)}},methods:{handleSizeChange:function(e){this.queryVal?this.$emit("getListByPage",e):this.$emit("getList",e)},handleCurrentChange:function(e){console.log(e),e=1!==e?(e-1)*this.pageSize:0;var t=this.tableData.length;t>e+this.pageSize?this.tableView=this.tableData.slice(e,e+this.pageSize):this.tableView=this.tableData.slice(e,this.tableData.length),this.$emit("tables",this.tableView)}}}),n=i,o=s("2877"),l=Object(o["a"])(n,a,r,!1,null,null,null);t["a"]=l.exports},dbc4:function(e,t,s){},f71e:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var a=s("2b0e"),r=s("b311"),i=s.n(r);function n(e){a["default"].prototype.$message({message:e+"已复制到粘贴板",type:"success",duration:1500})}function o(){a["default"].prototype.$message({message:"复制失败",type:"error"})}function l(e,t,s){var a=new i.a(s.target,{text:function(){return e}});a.on("success",(function(){n(t),a.destroy()})),a.on("error",(function(){o(),a.destroy()})),a.onClick(s)}}}]);